<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><title>小郑的博客</title><meta name="description" content="记录我生活的点点积极">
    <link rel="modulepreload" href="/assets/app.73a0ea12.js"><link rel="modulepreload" href="/assets/hooks优缺点.html.ad700e07.js"><link rel="modulepreload" href="/assets/hooks优缺点.html.5e1e9a3d.js"><link rel="prefetch" href="/assets/index.html.38293f4b.js"><link rel="prefetch" href="/assets/MAC上安装brew方式及使用技巧.html.c0781192.js"><link rel="prefetch" href="/assets/Mac下修改hosts 解决访问github慢的问题.html.4a53202f.js"><link rel="prefetch" href="/assets/mac下docker安装kenkins.html.994330a1.js"><link rel="prefetch" href="/assets/视频流.html.1ace05bd.js"><link rel="prefetch" href="/assets/egg中间件.html.8cc25dc6.js"><link rel="prefetch" href="/assets/egg基础.html.99cdf492.js"><link rel="prefetch" href="/assets/egg定时任务.html.b2f8617b.js"><link rel="prefetch" href="/assets/index.html.f5225c6b.js"><link rel="prefetch" href="/assets/生成接口文档egg-swagger-doc.html.de101b0b.js"><link rel="prefetch" href="/assets/Ubuntu下安装AndroidStudio.html.66726843.js"><link rel="prefetch" href="/assets/安卓打包icon及其启动页图片大小.html.89616046.js"><link rel="prefetch" href="/assets/Flutter-原生路由.html.c892e5e4.js"><link rel="prefetch" href="/assets/Flutter-常用库及时使用入门级方法-一些经常用到的的副本.html.be437e49.js"><link rel="prefetch" href="/assets/Flutter创建插件详解并发布到Pub库.html.fcb7093a.js"><link rel="prefetch" href="/assets/flutter_fluro.html.f3a3c3f7.js"><link rel="prefetch" href="/assets/flutter_mqtt.html.038739c8.js"><link rel="prefetch" href="/assets/flutter实用方法.html.553a1f3b.js"><link rel="prefetch" href="/assets/flutter常见问题.html.e51da1da.js"><link rel="prefetch" href="/assets/fvm.html.975adc70.js"><link rel="prefetch" href="/assets/Docker安装MySQL.html.b2d9d950.js"><link rel="prefetch" href="/assets/Docker安装Redis.html.23b77a64.js"><link rel="prefetch" href="/assets/docker安装nginx.html.1570f88c.js"><link rel="prefetch" href="/assets/docker常用命令.html.105d5b43.js"><link rel="prefetch" href="/assets/index.html.2c61ea97.js"><link rel="prefetch" href="/assets/package.json中版本号前面~和_的区别.html.ab36232a.js"><link rel="prefetch" href="/assets/使用Nexus搭建npm私服.html.c5e21e1d.js"><link rel="prefetch" href="/assets/前端基础设施建设.html.06019aa1.js"><link rel="prefetch" href="/assets/将npm包发布在私有仓库（nexus）中.html.b9601254.js"><link rel="prefetch" href="/assets/打造vue3组件库.html.8a668900.js"><link rel="prefetch" href="/assets/打造一款企业级cli脚手架.html.4d53b65b.js"><link rel="prefetch" href="/assets/git入门学习.html.e4bce7bb.js"><link rel="prefetch" href="/assets/git提交规范.html.acd9cbe6.js"><link rel="prefetch" href="/assets/如何把分支代码合并到master主分支上.html.003b1326.js"><link rel="prefetch" href="/assets/新版git提交到github.html.8b57c998.js"><link rel="prefetch" href="/assets/index.html.72b78845.js"><link rel="prefetch" href="/assets/index.html.ef4aed04.js"><link rel="prefetch" href="/assets/Mac下使用 brew 安装mysql.html.89e22aff.js"><link rel="prefetch" href="/assets/mysql 基础操作.html.a0bbab91.js"><link rel="prefetch" href="/assets/inquirer报错Error.html.9873e08a.js"><link rel="prefetch" href="/assets/mddir项目结构生成包.html.15e5d0b2.js"><link rel="prefetch" href="/assets/npm指令集.html.abb34763.js"><link rel="prefetch" href="/assets/发布npm包到官方仓库.html.3737c2b3.js"><link rel="prefetch" href="/assets/pnpm基础.html.19bf3a4c.js"><link rel="prefetch" href="/assets/rollup打包问题.html.47d6191b.js"><link rel="prefetch" href="/assets/gin数据解析和解绑.html.253d7450.js"><link rel="prefetch" href="/assets/BFC.html.a7e3c004.js"><link rel="prefetch" href="/assets/CSS选择器及其优先级.html.0a35a7d6.js"><link rel="prefetch" href="/assets/index.html.91e251b0.js"><link rel="prefetch" href="/assets/eslint校验.html.1b110b83.js"><link rel="prefetch" href="/assets/jest.html.d66df8d5.js"><link rel="prefetch" href="/assets/link和@import的区别.html.1c0330f2.js"><link rel="prefetch" href="/assets/rollup.config.html.f4402541.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.313b58c2.js"><link rel="prefetch" href="/assets/tsconfig.html.7aab1af4.js"><link rel="prefetch" href="/assets/uglify原理.html.a38ce5d0.js"><link rel="prefetch" href="/assets/utils.html.4cf1cc43.js"><link rel="prefetch" href="/assets/webpack loader机制.html.43257130.js"><link rel="prefetch" href="/assets/webpack工作流程.html.a16dbc10.js"><link rel="prefetch" href="/assets/webpack插件机制.html.ed47a88e.js"><link rel="prefetch" href="/assets/盒模型.html.9f485028.js"><link rel="prefetch" href="/assets/Flutter与原生通信的Channel有哪几种.html.6db14cbf.js"><link rel="prefetch" href="/assets/flutter基础面试题.html.80f40384.js"><link rel="prefetch" href="/assets/flutter生命周期.html.175185bd.js"><link rel="prefetch" href="/assets/简述Widget的StatelessWidget和StatefulWidget两种状态组件类.html.9a96bdeb.js"><link rel="prefetch" href="/assets/DOCTYPE 的作用，标准模式与怪异模式的区别.html.d1d63862.js"><link rel="prefetch" href="/assets/HTML5的离线储存，工作原理.html.ff22150f.js"><link rel="prefetch" href="/assets/行内元素与块级元素的区别.html.704c73a7.js"><link rel="prefetch" href="/assets/JavaScript原型_原型链_有什么特点.html.9abf527b.js"><link rel="prefetch" href="/assets/Javascript实现继承.html.ad781d8e.js"><link rel="prefetch" href="/assets/index.html.db00e42a.js"><link rel="prefetch" href="/assets/WebSocket.html.5f83b4c4.js"><link rel="prefetch" href="/assets/babel原理.html.de5275e1.js"><link rel="prefetch" href="/assets/bind、call、apply区别.html.1173a332.js"><link rel="prefetch" href="/assets/eslint校验.html.da0902da.js"><link rel="prefetch" href="/assets/eventLoop.html.0d4a14ad.js"><link rel="prefetch" href="/assets/jest.html.adcec9a2.js"><link rel="prefetch" href="/assets/js箭头函数和普通函数区别.html.412e40b6.js"><link rel="prefetch" href="/assets/new操作符.html.c0576f22.js"><link rel="prefetch" href="/assets/promise问题.html.e1ef4bdb.js"><link rel="prefetch" href="/assets/this指向问题.html.e23378f1.js"><link rel="prefetch" href="/assets/this的指向问题.html.d11f7077.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.979ee8a6.js"><link rel="prefetch" href="/assets/typeof与instanceof区别.html.f590858f.js"><link rel="prefetch" href="/assets/uglify原理.html.f2019b98.js"><link rel="prefetch" href="/assets/var.html.89a0ee44.js"><link rel="prefetch" href="/assets/webpack loader机制.html.a0c85a8d.js"><link rel="prefetch" href="/assets/webpack工作流程.html.47ba8669.js"><link rel="prefetch" href="/assets/webpack插件机制.html.06c5e61b.js"><link rel="prefetch" href="/assets/关于原型的题目.html.5469e662.js"><link rel="prefetch" href="/assets/变量提升.html.a5fe76f6.js"><link rel="prefetch" href="/assets/常用的设计模式.html.3b7e62bc.js"><link rel="prefetch" href="/assets/强缓存与协商缓存.html.f8611978.js"><link rel="prefetch" href="/assets/微前端.html.ce014a6b.js"><link rel="prefetch" href="/assets/数组的常用方法.html.1061cf51.js"><link rel="prefetch" href="/assets/模块化机制.html.f7d66752.js"><link rel="prefetch" href="/assets/深拷贝浅拷贝的区别以及如何实现一个深拷贝.html.267a6887.js"><link rel="prefetch" href="/assets/说说你对闭包的理解以及闭包使用场景.html.7bb5bd06.js"><link rel="prefetch" href="/assets/说说对作用域链的理解.html.b5987088.js"><link rel="prefetch" href="/assets/防抖和节流.html.19c5db7e.js"><link rel="prefetch" href="/assets/cluster原理.html.cd1f7681.js"><link rel="prefetch" href="/assets/egg-bin.html.ec6edcf6.js"><link rel="prefetch" href="/assets/egg-cluster.html.538be63b.js"><link rel="prefetch" href="/assets/pipe原理.html.d8891333.js"><link rel="prefetch" href="/assets/require原理.html.50cd9f15.js"><link rel="prefetch" href="/assets/事件循环.html.7ef61431.js"><link rel="prefetch" href="/assets/异常处理.html.8ac2569b.js"><link rel="prefetch" href="/assets/模块机制.html.051dd273.js"><link rel="prefetch" href="/assets/流机制.html.340c83fc.js"><link rel="prefetch" href="/assets/进程守护.html.3c535ff4.js"><link rel="prefetch" href="/assets/进程通信.html.8f69cd41.js"><link rel="prefetch" href="/assets/MVC_MVVM_MVP.html.14bf2325.js"><link rel="prefetch" href="/assets/React16_17_18.html.1be189ae.js"><link rel="prefetch" href="/assets/Suspense.html.0fc05441.js"><link rel="prefetch" href="/assets/fiber.html.da323de7.js"><link rel="prefetch" href="/assets/jsx原理.html.21afcc13.js"><link rel="prefetch" href="/assets/memo 和 useMemo.html.0db702ab.js"><link rel="prefetch" href="/assets/redux原理.html.3239e434.js"><link rel="prefetch" href="/assets/setState过程.html.584cee21.js"><link rel="prefetch" href="/assets/useLayoutEffect.html.5893332a.js"><link rel="prefetch" href="/assets/合成事件.html.555f93cf.js"><link rel="prefetch" href="/assets/常用设计模式.html.ba818b79.js"><link rel="prefetch" href="/assets/生命周期.html.9a0b8b01.js"><link rel="prefetch" href="/assets/组件间的通信方式.html.1421eee0.js"><link rel="prefetch" href="/assets/虚拟DOM.html.577443b5.js"><link rel="prefetch" href="/assets/错误处理.html.252b736e.js"><link rel="prefetch" href="/assets/高阶组件.html.f2749b28.js"><link rel="prefetch" href="/assets/vuex.html.281d7e6a.js"><link rel="prefetch" href="/assets/vue创建企业级项目.html.c05a00bd.js"><link rel="prefetch" href="/assets/vue实现双向数据绑定原理是什么.html.82f8abac.js"><link rel="prefetch" href="/assets/组建间的通信.html.0936df15.js"><link rel="prefetch" href="/assets/Tree-Shaking实现原理.html.63d13577.js"><link rel="prefetch" href="/assets/babel原理.html.c5757b92.js"><link rel="prefetch" href="/assets/eslint校验.html.d1a1d108.js"><link rel="prefetch" href="/assets/jest.html.6f678d76.js"><link rel="prefetch" href="/assets/rollup.config.html.05698c83.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.fa41c39b.js"><link rel="prefetch" href="/assets/tsconfig.html.12eb5399.js"><link rel="prefetch" href="/assets/uglify原理.html.6acf0198.js"><link rel="prefetch" href="/assets/utils.html.72cfd0be.js"><link rel="prefetch" href="/assets/webpack loader机制.html.eaf35051.js"><link rel="prefetch" href="/assets/webpack工作流程.html.f80ce981.js"><link rel="prefetch" href="/assets/webpack插件机制.html.0fa493cf.js"><link rel="prefetch" href="/assets/微前端.html.f3027cd7.js"><link rel="prefetch" href="/assets/模块化机制.html.eef5a072.js"><link rel="prefetch" href="/assets/常见的shell脚本.html.4f8d31d6.js"><link rel="prefetch" href="/assets/webp.html.6761fab5.js"><link rel="prefetch" href="/assets/从浏览器输入到页面展示的过程.html.522552a8.js"><link rel="prefetch" href="/assets/内存泄漏.html.af8e0ecf.js"><link rel="prefetch" href="/assets/前端性能优化手段.html.266261fe.js"><link rel="prefetch" href="/assets/动画性能.html.a2b6e745.js"><link rel="prefetch" href="/assets/大量图片加载优化.html.f1d8c803.js"><link rel="prefetch" href="/assets/性能指标.html.8ccb6f02.js"><link rel="prefetch" href="/assets/性能计算.html.0581ff75.js"><link rel="prefetch" href="/assets/渲染合成层.html.daf7eeea.js"><link rel="prefetch" href="/assets/白屏.html.20146db6.js"><link rel="prefetch" href="/assets/重排和重绘.html.3900a27d.js"><link rel="prefetch" href="/assets/cicd.html.ba6874f8.js"><link rel="prefetch" href="/assets/css.html.ab2ae764.js"><link rel="prefetch" href="/assets/es6新特性.html.29bf0cd1.js"><link rel="prefetch" href="/assets/eventloop.html.403b64f8.js"><link rel="prefetch" href="/assets/hooks 和vue响应式对比.html.47d558ae.js"><link rel="prefetch" href="/assets/hooks生命周期.html.5cf940e9.js"><link rel="prefetch" href="/assets/ts相关问题.html.ea638906.js"><link rel="prefetch" href="/assets/weebpack.html.fa621f21.js"><link rel="prefetch" href="/assets/从url输入到页面显示会有哪些步骤.html.795e82d4.js"><link rel="prefetch" href="/assets/前端安全.html.c5020f76.js"><link rel="prefetch" href="/assets/基础题.html.06cccde8.js"><link rel="prefetch" href="/assets/对象相关问题.html.d2dd2cbe.js"><link rel="prefetch" href="/assets/数组.html.b7fdd806.js"><link rel="prefetch" href="/assets/普通函数和箭头函数的区别.html.55d02210.js"><link rel="prefetch" href="/assets/汽车之家.html.107be28a.js"><link rel="prefetch" href="/assets/移动端问题.html.f366f28e.js"><link rel="prefetch" href="/assets/纯函数.html.d8bf03e3.js"><link rel="prefetch" href="/assets/缓存.html.0929dfe4.js"><link rel="prefetch" href="/assets/网络.html.2ee2d2ed.js"><link rel="prefetch" href="/assets/考试记录.html.469eca04.js"><link rel="prefetch" href="/assets/记录.html.a12b0684.js"><link rel="prefetch" href="/assets/跨域.html.0dad1915.js"><link rel="prefetch" href="/assets/重绘和重排.html.0b35012b.js"><link rel="prefetch" href="/assets/冒泡排序.html.e8a92747.js"><link rel="prefetch" href="/assets/反转ul.html.74aa08c6.js"><link rel="prefetch" href="/assets/查找对象路径.html.00d118b6.js"><link rel="prefetch" href="/assets/统计数组中值的出现次数.html.638fe9c7.js"><link rel="prefetch" href="/assets/JavaScript经典手写题.html.de19711d.js"><link rel="prefetch" href="/assets/函数柯里化.html.2f6b21bd.js"><link rel="prefetch" href="/assets/函数缓存.html.d64f8ae7.js"><link rel="prefetch" href="/assets/反转链表.html.37c6b483.js"><link rel="prefetch" href="/assets/实现原生的AJAX请求.html.d67e5996.js"><link rel="prefetch" href="/assets/手写防抖和节流.html.675a264c.js"><link rel="prefetch" href="/assets/整数反转.html.de49aa62.js"><link rel="prefetch" href="/assets/TCP三次握手和四次挥手.html.8d82ce35.js"><link rel="prefetch" href="/assets/全排列.html.8ba52830.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.6f53ee0d.js"><link rel="prefetch" href="/assets/MAC上安装brew方式及使用技巧.html.ef700de8.js"><link rel="prefetch" href="/assets/Mac下修改hosts 解决访问github慢的问题.html.68882914.js"><link rel="prefetch" href="/assets/mac下docker安装kenkins.html.0e9e45b2.js"><link rel="prefetch" href="/assets/视频流.html.77fdc283.js"><link rel="prefetch" href="/assets/egg中间件.html.ee842042.js"><link rel="prefetch" href="/assets/egg基础.html.d519f9a1.js"><link rel="prefetch" href="/assets/egg定时任务.html.a56a5146.js"><link rel="prefetch" href="/assets/index.html.535fab4b.js"><link rel="prefetch" href="/assets/生成接口文档egg-swagger-doc.html.08d38e86.js"><link rel="prefetch" href="/assets/Ubuntu下安装AndroidStudio.html.91398eb2.js"><link rel="prefetch" href="/assets/安卓打包icon及其启动页图片大小.html.067f99c5.js"><link rel="prefetch" href="/assets/Flutter-原生路由.html.b3920056.js"><link rel="prefetch" href="/assets/Flutter-常用库及时使用入门级方法-一些经常用到的的副本.html.bcb3d256.js"><link rel="prefetch" href="/assets/Flutter创建插件详解并发布到Pub库.html.3963b37b.js"><link rel="prefetch" href="/assets/flutter_fluro.html.6215122c.js"><link rel="prefetch" href="/assets/flutter_mqtt.html.e2f0a895.js"><link rel="prefetch" href="/assets/flutter实用方法.html.175c12e2.js"><link rel="prefetch" href="/assets/flutter常见问题.html.dda33e65.js"><link rel="prefetch" href="/assets/fvm.html.9b86b558.js"><link rel="prefetch" href="/assets/Docker安装MySQL.html.66fa2143.js"><link rel="prefetch" href="/assets/Docker安装Redis.html.d04f8a09.js"><link rel="prefetch" href="/assets/docker安装nginx.html.2378d648.js"><link rel="prefetch" href="/assets/docker常用命令.html.bc060ba4.js"><link rel="prefetch" href="/assets/index.html.4bad2743.js"><link rel="prefetch" href="/assets/package.json中版本号前面~和_的区别.html.7445a86c.js"><link rel="prefetch" href="/assets/使用Nexus搭建npm私服.html.c7891b5d.js"><link rel="prefetch" href="/assets/前端基础设施建设.html.03a962d3.js"><link rel="prefetch" href="/assets/将npm包发布在私有仓库（nexus）中.html.fd34a088.js"><link rel="prefetch" href="/assets/打造vue3组件库.html.271f2ab7.js"><link rel="prefetch" href="/assets/打造一款企业级cli脚手架.html.91a4ebf6.js"><link rel="prefetch" href="/assets/git入门学习.html.7bc625a1.js"><link rel="prefetch" href="/assets/git提交规范.html.0a19a3a1.js"><link rel="prefetch" href="/assets/如何把分支代码合并到master主分支上.html.d13ebd88.js"><link rel="prefetch" href="/assets/新版git提交到github.html.e772d176.js"><link rel="prefetch" href="/assets/index.html.58d77fa1.js"><link rel="prefetch" href="/assets/index.html.5969c65f.js"><link rel="prefetch" href="/assets/Mac下使用 brew 安装mysql.html.3689c984.js"><link rel="prefetch" href="/assets/mysql 基础操作.html.61bb03db.js"><link rel="prefetch" href="/assets/inquirer报错Error.html.98e3336b.js"><link rel="prefetch" href="/assets/mddir项目结构生成包.html.809ef953.js"><link rel="prefetch" href="/assets/npm指令集.html.d83631d7.js"><link rel="prefetch" href="/assets/发布npm包到官方仓库.html.b60261aa.js"><link rel="prefetch" href="/assets/pnpm基础.html.d3349cca.js"><link rel="prefetch" href="/assets/rollup打包问题.html.2c54e95d.js"><link rel="prefetch" href="/assets/gin数据解析和解绑.html.c2c1243e.js"><link rel="prefetch" href="/assets/BFC.html.d25c85b6.js"><link rel="prefetch" href="/assets/CSS选择器及其优先级.html.e527aeaa.js"><link rel="prefetch" href="/assets/index.html.59c239cc.js"><link rel="prefetch" href="/assets/eslint校验.html.cd1047d0.js"><link rel="prefetch" href="/assets/jest.html.11787af9.js"><link rel="prefetch" href="/assets/link和@import的区别.html.6528ea6a.js"><link rel="prefetch" href="/assets/rollup.config.html.4db0a59a.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.099395ff.js"><link rel="prefetch" href="/assets/tsconfig.html.dcdd7f5f.js"><link rel="prefetch" href="/assets/uglify原理.html.b1d3ba3d.js"><link rel="prefetch" href="/assets/utils.html.06c18974.js"><link rel="prefetch" href="/assets/webpack loader机制.html.80933cf6.js"><link rel="prefetch" href="/assets/webpack工作流程.html.6e105335.js"><link rel="prefetch" href="/assets/webpack插件机制.html.4eddaec2.js"><link rel="prefetch" href="/assets/盒模型.html.fae3ebcd.js"><link rel="prefetch" href="/assets/Flutter与原生通信的Channel有哪几种.html.06887c47.js"><link rel="prefetch" href="/assets/flutter基础面试题.html.08b0803a.js"><link rel="prefetch" href="/assets/flutter生命周期.html.2f3dfd3d.js"><link rel="prefetch" href="/assets/简述Widget的StatelessWidget和StatefulWidget两种状态组件类.html.bab6c76c.js"><link rel="prefetch" href="/assets/DOCTYPE 的作用，标准模式与怪异模式的区别.html.f849864d.js"><link rel="prefetch" href="/assets/HTML5的离线储存，工作原理.html.41bb171c.js"><link rel="prefetch" href="/assets/行内元素与块级元素的区别.html.9a524a86.js"><link rel="prefetch" href="/assets/JavaScript原型_原型链_有什么特点.html.66726a26.js"><link rel="prefetch" href="/assets/Javascript实现继承.html.ae56dfdb.js"><link rel="prefetch" href="/assets/index.html.01657ba8.js"><link rel="prefetch" href="/assets/WebSocket.html.5ad70f2c.js"><link rel="prefetch" href="/assets/babel原理.html.1de09b42.js"><link rel="prefetch" href="/assets/bind、call、apply区别.html.be78e8fc.js"><link rel="prefetch" href="/assets/eslint校验.html.7dd26a0a.js"><link rel="prefetch" href="/assets/eventLoop.html.6ed0ebff.js"><link rel="prefetch" href="/assets/jest.html.5c8ebc12.js"><link rel="prefetch" href="/assets/js箭头函数和普通函数区别.html.f1d76244.js"><link rel="prefetch" href="/assets/new操作符.html.a0902fc1.js"><link rel="prefetch" href="/assets/promise问题.html.81e2f8f3.js"><link rel="prefetch" href="/assets/this指向问题.html.a360d2ae.js"><link rel="prefetch" href="/assets/this的指向问题.html.652ddc09.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.a9767112.js"><link rel="prefetch" href="/assets/typeof与instanceof区别.html.8d4687cb.js"><link rel="prefetch" href="/assets/uglify原理.html.14afcc55.js"><link rel="prefetch" href="/assets/var.html.b50cac53.js"><link rel="prefetch" href="/assets/webpack loader机制.html.1218611a.js"><link rel="prefetch" href="/assets/webpack工作流程.html.f3f9a21e.js"><link rel="prefetch" href="/assets/webpack插件机制.html.c2c0171c.js"><link rel="prefetch" href="/assets/关于原型的题目.html.342b573f.js"><link rel="prefetch" href="/assets/变量提升.html.2c7a0c3f.js"><link rel="prefetch" href="/assets/常用的设计模式.html.1cbf2b5a.js"><link rel="prefetch" href="/assets/强缓存与协商缓存.html.7f665733.js"><link rel="prefetch" href="/assets/微前端.html.c78ad5bb.js"><link rel="prefetch" href="/assets/数组的常用方法.html.d127b7d1.js"><link rel="prefetch" href="/assets/模块化机制.html.a37d0af9.js"><link rel="prefetch" href="/assets/深拷贝浅拷贝的区别以及如何实现一个深拷贝.html.1dd3b67b.js"><link rel="prefetch" href="/assets/说说你对闭包的理解以及闭包使用场景.html.011f5052.js"><link rel="prefetch" href="/assets/说说对作用域链的理解.html.413ff483.js"><link rel="prefetch" href="/assets/防抖和节流.html.229cff05.js"><link rel="prefetch" href="/assets/cluster原理.html.14b8b61b.js"><link rel="prefetch" href="/assets/egg-bin.html.085e1d4b.js"><link rel="prefetch" href="/assets/egg-cluster.html.99c8e858.js"><link rel="prefetch" href="/assets/pipe原理.html.81393670.js"><link rel="prefetch" href="/assets/require原理.html.d43e113d.js"><link rel="prefetch" href="/assets/事件循环.html.3cf701fb.js"><link rel="prefetch" href="/assets/异常处理.html.25138c12.js"><link rel="prefetch" href="/assets/模块机制.html.c79b3240.js"><link rel="prefetch" href="/assets/流机制.html.c3131ead.js"><link rel="prefetch" href="/assets/进程守护.html.316a5815.js"><link rel="prefetch" href="/assets/进程通信.html.2c2f6d9f.js"><link rel="prefetch" href="/assets/MVC_MVVM_MVP.html.0ffc5c72.js"><link rel="prefetch" href="/assets/React16_17_18.html.344d12f9.js"><link rel="prefetch" href="/assets/Suspense.html.ac2b0587.js"><link rel="prefetch" href="/assets/fiber.html.3bc04540.js"><link rel="prefetch" href="/assets/jsx原理.html.d3f3576f.js"><link rel="prefetch" href="/assets/memo 和 useMemo.html.c2127b5a.js"><link rel="prefetch" href="/assets/redux原理.html.49095703.js"><link rel="prefetch" href="/assets/setState过程.html.d3c86fde.js"><link rel="prefetch" href="/assets/useLayoutEffect.html.4579c38f.js"><link rel="prefetch" href="/assets/合成事件.html.7f633ded.js"><link rel="prefetch" href="/assets/常用设计模式.html.1eaad073.js"><link rel="prefetch" href="/assets/生命周期.html.2b325ea0.js"><link rel="prefetch" href="/assets/组件间的通信方式.html.130905cd.js"><link rel="prefetch" href="/assets/虚拟DOM.html.9a74bead.js"><link rel="prefetch" href="/assets/错误处理.html.8809e25c.js"><link rel="prefetch" href="/assets/高阶组件.html.4bae8cfc.js"><link rel="prefetch" href="/assets/vuex.html.d83d4eb7.js"><link rel="prefetch" href="/assets/vue创建企业级项目.html.39177e29.js"><link rel="prefetch" href="/assets/vue实现双向数据绑定原理是什么.html.cef2cac6.js"><link rel="prefetch" href="/assets/组建间的通信.html.adabe582.js"><link rel="prefetch" href="/assets/Tree-Shaking实现原理.html.19d303a0.js"><link rel="prefetch" href="/assets/babel原理.html.aab9e94d.js"><link rel="prefetch" href="/assets/eslint校验.html.9c74d298.js"><link rel="prefetch" href="/assets/jest.html.6a698d2b.js"><link rel="prefetch" href="/assets/rollup.config.html.c2a21cf8.js"><link rel="prefetch" href="/assets/tree-shaking原理.html.d31e7496.js"><link rel="prefetch" href="/assets/tsconfig.html.2cb335e2.js"><link rel="prefetch" href="/assets/uglify原理.html.e936a555.js"><link rel="prefetch" href="/assets/utils.html.caead205.js"><link rel="prefetch" href="/assets/webpack loader机制.html.cd7a4c4e.js"><link rel="prefetch" href="/assets/webpack工作流程.html.6aa5e53c.js"><link rel="prefetch" href="/assets/webpack插件机制.html.f59f3a6c.js"><link rel="prefetch" href="/assets/微前端.html.8686093f.js"><link rel="prefetch" href="/assets/模块化机制.html.ac690e0c.js"><link rel="prefetch" href="/assets/常见的shell脚本.html.1571a466.js"><link rel="prefetch" href="/assets/webp.html.feb6ac9c.js"><link rel="prefetch" href="/assets/从浏览器输入到页面展示的过程.html.3347efc9.js"><link rel="prefetch" href="/assets/内存泄漏.html.bfef1ded.js"><link rel="prefetch" href="/assets/前端性能优化手段.html.76f7d997.js"><link rel="prefetch" href="/assets/动画性能.html.2e3a3508.js"><link rel="prefetch" href="/assets/大量图片加载优化.html.bd3047b0.js"><link rel="prefetch" href="/assets/性能指标.html.ddc0976a.js"><link rel="prefetch" href="/assets/性能计算.html.4aa8438d.js"><link rel="prefetch" href="/assets/渲染合成层.html.11bc00a5.js"><link rel="prefetch" href="/assets/白屏.html.267992b5.js"><link rel="prefetch" href="/assets/重排和重绘.html.3b29b473.js"><link rel="prefetch" href="/assets/cicd.html.894fad2d.js"><link rel="prefetch" href="/assets/css.html.3b6c32f3.js"><link rel="prefetch" href="/assets/es6新特性.html.a69b62fe.js"><link rel="prefetch" href="/assets/eventloop.html.7813df50.js"><link rel="prefetch" href="/assets/hooks 和vue响应式对比.html.fe6bccb8.js"><link rel="prefetch" href="/assets/hooks生命周期.html.6fb6d6aa.js"><link rel="prefetch" href="/assets/ts相关问题.html.630f00ec.js"><link rel="prefetch" href="/assets/weebpack.html.5b9138f7.js"><link rel="prefetch" href="/assets/从url输入到页面显示会有哪些步骤.html.01813723.js"><link rel="prefetch" href="/assets/前端安全.html.8d8a93f9.js"><link rel="prefetch" href="/assets/基础题.html.cbf4b76f.js"><link rel="prefetch" href="/assets/对象相关问题.html.07a98f1c.js"><link rel="prefetch" href="/assets/数组.html.52b158ba.js"><link rel="prefetch" href="/assets/普通函数和箭头函数的区别.html.0ef80be0.js"><link rel="prefetch" href="/assets/汽车之家.html.cf6d4a70.js"><link rel="prefetch" href="/assets/移动端问题.html.0fe2e90f.js"><link rel="prefetch" href="/assets/纯函数.html.230704e1.js"><link rel="prefetch" href="/assets/缓存.html.2217bab2.js"><link rel="prefetch" href="/assets/网络.html.c410583c.js"><link rel="prefetch" href="/assets/考试记录.html.49322397.js"><link rel="prefetch" href="/assets/记录.html.02fd6fcc.js"><link rel="prefetch" href="/assets/跨域.html.d1e9e8aa.js"><link rel="prefetch" href="/assets/重绘和重排.html.d96704cc.js"><link rel="prefetch" href="/assets/冒泡排序.html.a4a0fb93.js"><link rel="prefetch" href="/assets/反转ul.html.c10bb138.js"><link rel="prefetch" href="/assets/查找对象路径.html.8486d7ec.js"><link rel="prefetch" href="/assets/统计数组中值的出现次数.html.e2889d97.js"><link rel="prefetch" href="/assets/JavaScript经典手写题.html.4204ee90.js"><link rel="prefetch" href="/assets/函数柯里化.html.d3200afa.js"><link rel="prefetch" href="/assets/函数缓存.html.0ccc5b14.js"><link rel="prefetch" href="/assets/反转链表.html.99432f1b.js"><link rel="prefetch" href="/assets/实现原生的AJAX请求.html.a101777b.js"><link rel="prefetch" href="/assets/手写防抖和节流.html.7a5cae72.js"><link rel="prefetch" href="/assets/整数反转.html.1093b6c0.js"><link rel="prefetch" href="/assets/TCP三次握手和四次挥手.html.439438d9.js"><link rel="prefetch" href="/assets/全排列.html.73896b05.js"><link rel="prefetch" href="/assets/404.html.1c1d6c36.js"><link rel="prefetch" href="/assets/404.b82f652a.js"><link rel="prefetch" href="/assets/Layout.af4a0b33.js">
    <link rel="stylesheet" href="/assets/style.f4d22aab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">小郑的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/interview/css/" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/interview/javascript/" class="" aria-label="javascript"><!--[--><!--]--> javascript <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/interview/css/" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/interview/javascript/" class="" aria-label="javascript"><!--[--><!--]--> javascript <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/frontend/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/interview/react/hooks%E4%BC%98%E7%BC%BA%E7%82%B9.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label><!--[--><!--]-->  <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>hooks 的原理：https://juejin.cn/post/6944863057000529933 https://blog.csdn.net/qq_36380426/article/details/116382485</p><p>hooks优缺点：https://www.jianshu.com/p/d5e4aa1a568d</p><p>hooks 的更新阶段： 1 updateWorkInprogerss 2 updateState 3 updateEffect 4 updateMemo 5 updateRef</p><p>hooks 的优势：</p><ol><li><p>它通过自定义hooks来复用状态，从而解决了类组件有些时候难以复用逻辑的问题</p></li><li><p>虽然状态(from useState)和副作用(useEffect)的存在依赖于组件，但它们可以在组件外部进行定义。这点是class component做不到的，你无法在外部声明state和副作用（如componentDidMount）。</p></li><li><p>高阶组件和renderProps也同样能做到。但hooks实现起来的代码量更少，以及更直观</p></li><li><p>向props或状态取值更加方便，函数组件的取值都从当前作用域直接获取变量，而类组件需要先访问实例this，再访问其属性或者方法，多了一步</p></li></ol><p>缺点：</p><ol><li><p>你必须清楚代码中useEffect和useCallback的“依赖项数组”的改变时机。有时候，你的useEffect依赖某个函数的不可变性，这个函数的不可变性又依赖于另一个函数的不可变性，这样便形成了一条依赖链。</p></li><li><p>例如 debounce ，在hooks 中就必须使用useDebounce，不能使用普通function 的 debounce。因为state改变触发函数重新初始化，所以无法记录之前的状态。</p></li><li><p>this 指向问题，不明确容易混乱</p></li></ol><p>这个问题在class component不会出现，因为class component的属性和方法都存放在一个instance上，调用方式是：this.state.xxx和this.method()。因为每次都是从一个不变的instance上进行取值</p><p>hooks 原理： 文将重点围绕四个中重点hooks展开，分别是负责组件更新的useState，负责执行副作用useEffect ,负责保存数据的useRef,负责缓存优化的useMemo， 至于useCallback,useReducer,useLayoutEffect原理和那四个重点hooks比较相近，</p><p>stateMounted 阶段 hooks 总结：</p><p>我们来总结一下初始化阶段,react-hooks做的事情，在一个函数组件第一次渲染执行上下文过程中，每个react-hooks执行，都会产生一个hook对象，并形成链表结构，绑定在workInProgress的memoizedState属性上，然后react-hooks上的state绑定在当前hooks对象的memoizedState属性上。对于effect副作用钩子，会绑定在workInProgress.updateQueue上，等到commit阶段，dom树构建完成，在执行每个 effect 副作用钩子。</p><p>react hooks 的常见问题： 1 在无状态组件每一次函数上下文执行的时候，react用什么方式记录了hooks的状态？ current fiber树: 当完成一次渲染之后，会产生一个current树,current会在commit阶段替换成真实的Dom树。 workInProgress.memoizedState: 在class组件中，memoizedState存放state信息，在function组件中，memoizedState在一次调和渲染过程中，以链表的形式存放hooks信息。</p><p>2 为什么不能条件语句中声明hooks? hooks声明为什么在组件的最顶部？ 在组件初始化的时候,每一次hooks执行，如useState(),useRef(),都会调用mountWorkInProgressHook, 首先每次执行一个hooks函数，都产生一个hook对象，里面保存了当前hook信息,然后将每个hooks以链表形式串联起来， 函数组件用memoizedState存放hooks链表。react用链表来严格保证hooks的顺序 一旦在条件语句中声明hooks，在下一次函数组件更新，hooks链表结构，将会被破坏，current树的memoizedState缓存hooks信息，和当前workInProgress不一致，如果涉及到读取state等操作，就会发生异常。</p><p>3 function函数组件中的useState，和 class类组件 setState有什么区别？</p><p>setState和useState是异步执行的（不会立即更新state的结果） 多次执行setState和useState，只会调用一次重新渲染render 不同的是，setState会进行state的合并，而useState则不会</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClickWithPromise</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClickWithoutPromise</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickWithPromise<span class="token punctuation">}</span><span class="token operator">&gt;</span>异步执行<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickWithoutPromise<span class="token punctuation">}</span><span class="token operator">&gt;</span>同步执行<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// class 的setState</span>
<span class="token comment">// 当点击同步执行按钮时，两次 setState 合并，只执行了最后一次，打印 2</span>
<span class="token comment">// 当点击异步执行按钮时，两次 setState 各自 render 一次，分别打印 2，3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> setA<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">handleClickWithPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setA</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token function">setA</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleClickWithoutPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setA</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">setA</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickWithPromise<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>a<span class="token punctuation">}</span> 异步执行<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClickWithoutPromise<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>a<span class="token punctuation">}</span> 同步执行<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 当点击同步执行按钮时，两次 setA 都执行，但合并 render 了一次，打印 3</span>
<span class="token comment">// 当点击异步执行按钮时，两次 setA 各自 render 一次，分别打印 2，3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为什么class 的setState 和 hooks useState 不同呢 答案： 用大白话说就是在实际的 useState/setState 前后各加了段逻辑给包了起来。只要是在同一个事务中的 setState 会进行合并（注意，useState不会进行state的合并）处理。 为什么会有同步执行和异步执行结果不同呢？ 这里就涉及到 react 的 batchUpdate 机制，合并更新。异步不能进行事务操作，同步可以 首先，为什么需要合并更新呢？ 如果没有合并更新，在每次执行 useState 的时候，组件都要重新 render 一次，会造成无效渲染，浪费时间（因为最后一次渲染会覆盖掉前面所有的渲染效果）。 所以 react 会把一些可以一起更新的 useState/setState 放在一起，进行合并更新。</p><p>4 react 是怎么捕获到hooks的执行上下文，是在函数组件内部的？ 答案：</p><p>5 为什么useRef不需要依赖注入，就能访问到最新的改变值？ 答案： 就是返回了缓存下来的值，也就是无论函数组件怎么执行，执行多少次，hook.memoizedState内存中都指向了一个对象</p><p>6 useMemo是怎么对值做缓存的？如何应用它优化性能？</p><p>我们执行useMemo函数，做的事情实际很简单，就是判断两次 deps是否相等，如果不想等，证明依赖项发生改变，那么执行 useMemo的第一个函数，得到新的值，然后重新赋值给hook.memoizedState,如果相等 证明没有依赖项改变，那么直接获取缓存的值。</p><p>不过这里有一点，值得注意，nextCreate()执行，如果里面引用了usestate等信息，变量会被引用，无法被垃圾回收机制回收，就是闭包原理，那么访问的属性有可能不是最新的值，所以需要把引用的值，添加到依赖项 dep 数组中。每一次dep改变，重新执行，就不会出现问题了</p><p>7 为什么两次传入useState的值相同，函数组件不更新? 答案：更新，设置相同的值，多次改触发，会render多次</p><p>batchUpdate机制，合并更新</p><p>8 function组件和class组件本质的区别</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> num <span class="token punctuation">,</span>setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handerClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setNumber</span><span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> handerClick <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打印结果：0 0 0 0 0 这个问题实际很蒙人，我们来一起分析一下,第一个类组件中，由于执行上setState没有在react正常的函数执行上下文上执行，而是setTimeout中执行的，批量更新条件被破坏。原理这里我就不讲了,所以可以直接获取到变化后的state。</p><p>但是在无状态组件中，似乎没有生效。原因很简单，在class状态中，通过一个实例化的class，去维护组件中的各种状态；但是在function组件中，没有一个状态去保存这些信息，每一次函数上下文执行，所有变量，常量都重新声明，执行完毕，再被垃圾机制回收。所以如上，无论setTimeout执行多少次，都是在当前函数上下文执行,此时num = 0不会变，之后setNumber执行，函数组件重新执行之后，num才变化。</p><p>所以， 对于class组件，我们只需要实例化一次，实例中保存了组件的state等状态。对于每一次更新只需要调用render方法就可以。但是在function组件中，每一次更新都是一次新的函数执行,为了保存一些状态,执行一些副作用钩子,react-hooks应运而生，去帮助记录组件的状态，处理一些额外的副作用。</p><p>在function组件中，没有一个状态去保存这些信息，每一次函数上下文执行，所有变量，常量都重新声明，执行完毕，再被垃圾机制回收，为了保存一些状态,执行一些副作用钩子,react-hooks应运而生，去帮助记录组件的状态，处理一些额外的副作 createElement。useMemo、useCallback、useEffect等有deps参数的Hook API都依赖Fiber.memoizedState属性（存储结果）</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhengzhuang@zhengzhngdeMBP2.www.idazoo.com">郑壮</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.73a0ea12.js" defer></script>
  </body>
</html>
